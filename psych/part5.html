<html>
    <head>
        <title>ОПРОСНИК ГЕНДЕРНОЙ ИДЕНТИЧНОСТИ</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
        <script>
            // (B) ENCRYPT & DECRYPT FUNCTIONS
            var crypt = {
            // (B1) THE SECRET KEY
            secret : "CIPHERKEY",
            
            // (B2) ENCRYPT
            encrypt : function (clear) {
                var cipher = CryptoJS.AES.encrypt(clear, crypt.secret);
                cipher = cipher.toString();
                return cipher;
            },
            
            // (B3) DECRYPT
            decrypt : function (cipher) {
                var decipher = CryptoJS.AES.decrypt(cipher, crypt.secret);
                decipher = decipher.toString(CryptoJS.enc.Utf8);
                return decipher;
            }
            };

            function checkData(){
                all_checked = true;
                for(let i=1; i<=18; i++){
                    this_checked = false;
                    for(let j=1; j<=5; j++){
                        this_checked = this_checked || document.getElementById('q'+i.toString()+'-'+j.toString()).checked;
                    }
                    all_checked = all_checked && this_checked;
                }
                return all_checked;
            }

            function gatherData(){
                var this_data = []
                for(let i=1; i<=18; i++){
                    for(let j=1; j<=5; j++){
                        if(document.getElementById('q'+i.toString()+'-'+j.toString()).checked){
                            this_data[i-1]=j;
                        }
                    }
                }
                return this_data;
            }

            function nextStep(){
                // check if form is filled properly
                if(!checkData()){
                    document.getElementById('error-message').innerHTML = 'Пожалуйста, заполните все поля!';
                    return;
                }
                // decode the structure from the param
                const queryString = window.location.search;
                const urlParams = new URLSearchParams(queryString);
                const data = decodeURIComponent(urlParams.get('data'));
                var plaintext = crypt.decrypt(data);
                console.log(plaintext);
                all_data = JSON.parse(plaintext);
                // collect data, put into structure
                all_data['part5'] = gatherData();
                // convert structure into string
                new_plaintext = JSON.stringify(all_data);
                // encript the string
                var ciphertext = crypt.encrypt(new_plaintext);
                // go to next page
                window.location.href =  './results.html?data='+encodeURIComponent(ciphertext);
            }
        </script>
    </head>
    <body>
        <center>
            <h3>Кафедра психологии МГУ им. М.В. Ломоносова в г. Ташкенте</h3>
            <h1>ОПРОСНИК ГЕНДЕРНОЙ ИДЕНТИЧНОСТИ</h1>
            <h3>Мужской вариант</h3>
            <h3>Часть 3</h3>
        </center> 
        <div style="width: 75%; margin: auto;">
            Пожалуйста, прочтите каждое утверждение и укажите ту цифру, которая точнее отражает, насколько каждое утверждение подходит для описания вашей жизни.<br><br>
        </div>
        <div style="width: 75%; margin: auto;">
            <!-- part 1 questions -->
            <table style="width: 75%; margin: auto; border:1pt;">
                <tr>
                    <th></th>
                    <th>Совершенно НЕ важно</th>
                    <th>Не особо важно</th>
                    <th>Не знаю</th>
                    <th>Довольно важно</th>
                    <th>Очень важно</th>
                </tr>
                <tr>
                    <td>Напористость</td>
                    <td><input type="radio" id="q1-1" name="q1" value="1"></td>
                    <td><input type="radio" id="q1-2" name="q1" value="2"></td>
                    <td><input type="radio" id="q1-3" name="q1" value="3"></td>
                    <td><input type="radio" id="q1-4" name="q1" value="4"></td>
                    <td><input type="radio" id="q1-5" name="q1" value="5"></td>
                </tr>
                <tr>
                    <td>Осторожность в действиях</td>
                    <td><input type="radio" id="q2-1" name="q2" value="1"></td>
                    <td><input type="radio" id="q2-2" name="q2" value="2"></td>
                    <td><input type="radio" id="q2-3" name="q2" value="3"></td>
                    <td><input type="radio" id="q2-4" name="q2" value="4"></td>
                    <td><input type="radio" id="q2-5" name="q2" value="5"></td>
                </tr>
                <tr>
                    <td>Рациональность</td>
                    <td><input type="radio" id="q3-1" name="q3" value="1"></td>
                    <td><input type="radio" id="q3-2" name="q3" value="2"></td>
                    <td><input type="radio" id="q3-3" name="q3" value="3"></td>
                    <td><input type="radio" id="q3-4" name="q3" value="4"></td>
                    <td><input type="radio" id="q3-5" name="q3" value="5"></td>
                </tr>
                <tr>
                    <td>Способность понять другого</td>
                    <td><input type="radio" id="q4-1" name="q4" value="1"></td>
                    <td><input type="radio" id="q4-2" name="q4" value="2"></td>
                    <td><input type="radio" id="q4-3" name="q4" value="3"></td>
                    <td><input type="radio" id="q4-4" name="q4" value="4"></td>
                    <td><input type="radio" id="q4-5" name="q4" value="5"></td>
                </tr>
                <tr>
                    <td>Смелость</td>
                    <td><input type="radio" id="q5-1" name="q5" value="1"></td>
                    <td><input type="radio" id="q5-2" name="q5" value="2"></td>
                    <td><input type="radio" id="q5-3" name="q5" value="3"></td>
                    <td><input type="radio" id="q5-4" name="q5" value="4"></td>
                    <td><input type="radio" id="q5-5" name="q5" value="5"></td>
                </tr>
                <tr>
                    <td>Стремление утешить</td>
                    <td><input type="radio" id="q6-1" name="q6" value="1"></td>
                    <td><input type="radio" id="q6-2" name="q6" value="2"></td>
                    <td><input type="radio" id="q6-3" name="q6" value="3"></td>
                    <td><input type="radio" id="q6-4" name="q6" value="4"></td>
                    <td><input type="radio" id="q6-5" name="q6" value="5"></td>
                </tr>
                <tr>
                    <td>Независимость</td>
                    <td><input type="radio" id="q7-1" name="q7" value="1"></td>
                    <td><input type="radio" id="q7-2" name="q7" value="2"></td>
                    <td><input type="radio" id="q7-3" name="q7" value="3"></td>
                    <td><input type="radio" id="q7-4" name="q7" value="4"></td>
                    <td><input type="radio" id="q7-5" name="q7" value="5"></td>
                </tr>
                <tr>
                    <td>Женственность</td>
                    <td><input type="radio" id="q8-1" name="q8" value="1"></td>
                    <td><input type="radio" id="q8-2" name="q8" value="2"></td>
                    <td><input type="radio" id="q8-3" name="q8" value="3"></td>
                    <td><input type="radio" id="q8-4" name="q8" value="4"></td>
                    <td><input type="radio" id="q8-5" name="q8" value="5"></td>
                </tr>
                <tr>
                    <td>Объективность, беспристрастность</td>
                    <td><input type="radio" id="q9-1" name="q9" value="1"></td>
                    <td><input type="radio" id="q9-2" name="q9" value="2"></td>
                    <td><input type="radio" id="q9-3" name="q9" value="3"></td>
                    <td><input type="radio" id="q9-4" name="q9" value="4"></td>
                    <td><input type="radio" id="q9-5" name="q9" value="5"></td>
                </tr>
                <tr>
                    <td>Стремление к компромиссам</td>
                    <td><input type="radio" id="q10-1" name="q10" value="1"></td>
                    <td><input type="radio" id="q10-2" name="q10" value="2"></td>
                    <td><input type="radio" id="q10-3" name="q10" value="3"></td>
                    <td><input type="radio" id="q10-4" name="q10" value="4"></td>
                    <td><input type="radio" id="q10-5" name="q10" value="5"></td>
                </tr>
                <tr>
                    <td>Доминирование</td>
                    <td><input type="radio" id="q11-1" name="q11" value="1"></td>
                    <td><input type="radio" id="q11-2" name="q11" value="2"></td>
                    <td><input type="radio" id="q11-3" name="q11" value="3"></td>
                    <td><input type="radio" id="q11-4" name="q11" value="4"></td>
                    <td><input type="radio" id="q11-5" name="q11" value="5"></td>
                </tr>
                <tr>
                    <td>Склонность к проявлению чувств</td>
                    <td><input type="radio" id="q12-1" name="q12" value="1"></td>
                    <td><input type="radio" id="q12-2" name="q12" value="2"></td>
                    <td><input type="radio" id="q12-3" name="q12" value="3"></td>
                    <td><input type="radio" id="q12-4" name="q12" value="4"></td>
                    <td><input type="radio" id="q12-5" name="q12" value="5"></td>
                </tr>
                <tr>
                    <td>Спонтанность в действиях</td>
                    <td><input type="radio" id="q13-1" name="q13" value="1"></td>
                    <td><input type="radio" id="q13-2" name="q13" value="2"></td>
                    <td><input type="radio" id="q13-3" name="q13" value="3"></td>
                    <td><input type="radio" id="q13-4" name="q13" value="4"></td>
                    <td><input type="radio" id="q13-5" name="q13" value="5"></td>
                </tr>
                <tr>
                    <td>Искренность</td>
                    <td><input type="radio" id="q14-1" name="q14" value="1"></td>
                    <td><input type="radio" id="q14-2" name="q14" value="2"></td>
                    <td><input type="radio" id="q14-3" name="q14" value="3"></td>
                    <td><input type="radio" id="q14-4" name="q14" value="4"></td>
                    <td><input type="radio" id="q14-5" name="q14" value="5"></td>
                </tr>
                <tr>
                    <td>Готовность рисковать</td>
                    <td><input type="radio" id="q15-1" name="q15" value="1"></td>
                    <td><input type="radio" id="q15-2" name="q15" value="2"></td>
                    <td><input type="radio" id="q15-3" name="q15" value="3"></td>
                    <td><input type="radio" id="q15-4" name="q15" value="4"></td>
                    <td><input type="radio" id="q15-5" name="q15" value="5"></td>
                </tr>
                <tr>
                    <td>Вежливость</td>
                    <td><input type="radio" id="q16-1" name="q16" value="1"></td>
                    <td><input type="radio" id="q16-2" name="q16" value="2"></td>
                    <td><input type="radio" id="q16-3" name="q16" value="3"></td>
                    <td><input type="radio" id="q16-4" name="q16" value="4"></td>
                    <td><input type="radio" id="q16-5" name="q16" value="5"></td>
                </tr>
                <tr>
                    <td>Мужественность</td>
                    <td><input type="radio" id="q17-1" name="q17" value="1"></td>
                    <td><input type="radio" id="q17-2" name="q17" value="2"></td>
                    <td><input type="radio" id="q17-3" name="q17" value="3"></td>
                    <td><input type="radio" id="q17-4" name="q17" value="4"></td>
                    <td><input type="radio" id="q17-5" name="q17" value="5"></td>
                </tr>
                <tr>
                    <td>Нежность</td>
                    <td><input type="radio" id="q18-1" name="q18" value="1"></td>
                    <td><input type="radio" id="q18-2" name="q18" value="2"></td>
                    <td><input type="radio" id="q18-3" name="q18" value="3"></td>
                    <td><input type="radio" id="q18-4" name="q18" value="4"></td>
                    <td><input type="radio" id="q18-5" name="q18" value="5"></td>
                </tr>
            </table>
            <center>
                <br>
                <button onclick="nextStep();">Далее</button>
                <br><br><span id='error-message' style="color: red;"></span>
            </center>
        </div>
    </body>
</html>
